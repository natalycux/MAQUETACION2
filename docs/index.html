<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="css/bootstrap.css">
  <link rel="stylesheet" href="css/bootstrap.min.css">
  <title>BTS STORE</title>
  <script defer src="js/bootstrap.bundle.min.js"></script>
</head>

<body class="p-3 m-0 border-0 bd-example m-0 border-0" style="background-color: #dfddf3;">

  <!--logo-->
  <div class="d-flex justify-content-between align-items-center px-4 py-3" style="background-color: #dfddf3;">
    <img src="images/logosf2.png" alt="BTS SHOP Logo" style="height: 100px;">

    <!--carrito de compras-->
    <a href="#" class="text-dark position-relative" style="font-size: 28px;">
      <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" fill="currentColor" class="bi bi-cart4"
        viewBox="0 0 16 16">
        <path
          d="M0 2.5A.5.5 0 0 1 .5 2H2a.5.5 0 0 1 .485.379L2.89 4H14.5a.5.5 0 0 1 .485.621l-1.5 6A.5.5 0 0 1 13 11H4a.5.5 0 0 1-.485-.379L1.61 3H.5a.5.5 0 0 1-.5-.5M3.14 5l.5 2H5V5zM6 5v2h2V5zm3 0v2h2V5zm3 0v2h1.36l.5-2zm1.11 3H12v2h.61zM11 8H9v2h2zM8 8H6v2h2zM5 8H3.89l.5 2H5zm0 5a1 1 0 1 0 0 2 1 1 0 0 0 0-2m-2 1a2 2 0 1 1 4 0 2 2 0 0 1-4 0m9-1a1 1 0 1 0 0 2 1 1 0 0 0 0-2m-2 1a2 2 0 1 1 4 0 2 2 0 0 1-4 0" />
      </svg>

      <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">
        0
      </span>
    </a>
  </div>

  <!--carrusel-->
  <div id="carouselExampleFade" class="carousel slide carousel-fade">
    <div id="carousel" class="carousel slide carousel-fade mb-3 rounded overflow-hidden" data-bs-ride="carousel"
      data-bs-interval="3000">
      <div class="carousel-inner">
        <div class="carousel-item active d-flex justify-content-center align-items-center"
          style="height: 40vh; background-color: #361f64">
          <img src="images/banner1.png" class="img-fluid"
            style="max-height: 100%; max-width: 100%; object-fit: contain;" alt="banner1">
        </div>

        <div class="carousel-item active d-flex justify-content-center align-items-center"
          style="height: 40vh; background-color: #8d6dcc">
          <img src="images/banner2.png" class="img-fluid"
            style="max-height: 100%; max-width: 100%; object-fit: contain;" alt="banner1">
        </div>

        <div class="carousel-item active d-flex justify-content-center align-items-center"
          style="height: 40vh; background-color: #9e8fd5">
          <img src="images/banner3.png" class="img-fluid"
            style="max-height: 100%; max-width: 100%; object-fit: contain;" alt="banner1">
        </div>

        <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleFade" data-bs-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Anterior</span>
        </button>

        <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleFade" data-bs-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Siguiente</span>
        </button>

      </div>
    </div>
  </div>




  <div class="row">
  <!-- Categorías -->
  <div class="col-12 col-md-3 mb-4">
    <div class="bg-light p-3 rounded">
      <h5 class="fw-bold">Categorías</h5>
      <ul class="list-unstyled">
        <li><a href="#" class="text-decoration-none">Albums</a></li>
        <li><a href="#" class="text-decoration-none">Accesories</a></li>
        <li><a href="#" class="text-decoration-none">Merch</a></li>
        <li><a href="#" class="text-decoration-none">Giveaways</a></li>
      </ul>
    </div>
  </div>



      <!-- Productos (col-sm-9) -->
      <div class="col-12 col-sm-9">
        <div class="row" id="contenedorproductos">

        </div>
      </div>

      <!-- Footer -->
      <footer class="bg-dark text-white text-center py-3 mt-5">
        Diseñado por: Nataly Michell Cux Recinos - 1890-22-18009
      </footer>


      <!-- Javascript, productos dinámicos -->
      <script>
        let contadorCarrito = 0;

        function agregarAlCarrito(producto) {
          contadorCarrito++;

          const badge = document.querySelector('.badge');
          badge.textContent = contadorCarrito;

          console.log(`Añadido al carrito: ${producto.Nombre}`);
        }

        const contenedor = document.getElementById('contenedorproductos');

        fetch('https://backcvbgtmdesa.azurewebsites.net/api/productos')
          .then(response => {
            if (!response.ok) {
              throw new Error(`HTTP error, status: ${response.status}`);
            }
            return response.json();
          })
          .then(data => {
            data.forEach(producto => {
              const col = document.createElement('div');
              col.className = 'col-md-4 col-sm-12 p-2';

              let precioHTML = '';
              if (producto.EnOferta && producto.PrecioOferta != null) {
                precioHTML = `
                <span class="text-danger fw-bold">Q${parseFloat(producto.PrecioOferta).toFixed(2)}</span>
                <small class="text-muted text-decoration-line-through ms-2">Q${parseFloat(producto.Precio).toFixed(2)}</small>
              `;
              } else {
                precioHTML = `<span class="fw-bold">Q${parseFloat(producto.Precio).toFixed(2)}</span>`;
              }

              col.innerHTML = `
              <div class="card h-100">
              <img src="${producto.Imagen}" class="card-img-top img-fluid" alt="${producto.Nombre}">
              <div class="card-body d-flex flex-column">
              <h5 class="card-title">${producto.Nombre}</h5>
              <p class="card-text">${producto.Descripcion}</p>
              <p class="card-text">${precioHTML}</p>
              <a href="#" class="btn btn-primary mt-auto añadir-carrito">Añadir al carrito</a>
              </div>
              </div>
            `;

              contenedor.appendChild(col);

              const boton = col.querySelector('.añadir-carrito');
              boton.addEventListener('click', (e) => {
                e.preventDefault();
                agregarAlCarrito(producto);
              });
            });

          })
          .catch(error => {
            console.error('Error al cargar los productos:', error);
            const errorMessage = document.createElement('div');
            errorMessage.className = 'alert alert-danger';
            errorMessage.textContent = 'Error al cargar los productos. Por favor, inténtalo de nuevo más tarde.';
            contenedor.appendChild(errorMessage);
          });
      </script>


</body>

</html>